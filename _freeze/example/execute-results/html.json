{
  "hash": "8a20e239d0325e18d012fecddaa0a1b0",
  "result": {
    "markdown": "---\ntitle: \"Example analysis\"\nformat: html\n---\n\n\n# Background\n\nI will be doing a short data analysis on the built in air quality dataset in R. This dataset contains air quality measurements in New York between May and September in 1973. It contains 6 variables and 153 observations\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(airquality)\ndim(airquality)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 153   6\n```\n:::\n\n```{.r .cell-code}\nhead(airquality, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Ozone Solar.R Wind Temp Month Day\n1    41     190  7.4   67     5   1\n2    36     118  8.0   72     5   2\n3    12     149 12.6   74     5   3\n```\n:::\n:::\n\n\nOur question is: does temperature affect the ozone level?\n\nThe intended audience for this example analysis is anyone who wants to get a taste of the exploratory data analysis.\n\nData dictionary: https://www.rdocumentation.org/packages/datasets/versions/3.6.2/topics/airquality\n\n## Exploratory Data Analysis\n\nLet's first play with the dataset and get a taste of how it looks like using `dyplr` package.\n\nTo simplify the analysis, I will exclude the missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair <- airquality[rowSums(is.na(airquality)) == 0,]\n```\n:::\n\n\nAfter removing the missing values, we have 111 observations and 6 variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(air)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 111   6\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nair %>% summarise(mean_ozone = mean(Ozone),\n                  median_ozone = median(Ozone),\n                  sd_ozone = sd(Ozone),\n                  max_ozone = max(Ozone),\n                  min_ozone = min(Ozone))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean_ozone median_ozone sd_ozone max_ozone min_ozone\n1    42.0991           31 33.27597       168         1\n```\n:::\n:::\n\n\nOur ozone level is a very skewed dataset. Let's take a look at the histogram\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(air, aes(x=Ozone)) + geom_histogram() + \n  ggtitle(\"Histogram of Ozone Level\") + \n  geom_vline(aes(xintercept=mean(Ozone)),\n            color=\"blue\", linetype=\"dashed\", size=1) + \n  geom_vline(aes(xintercept=median(Ozone)),\n            color=\"red\", linetype=\"dashed\", size=1)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](example_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThe blue dashed line is the mean while the red dashed line is the median of ozone level. Our dataset is very skewed.\n\nMean ozone from May to September is 42, median at 31, maximum at 168, and minimum at 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair  %>%\n  select(Ozone, Month, Day)%>% \n  slice_max(Ozone, n = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Ozone Month Day\n1   168     8  25\n2   135     7   1\n3   122     8   7\n```\n:::\n:::\n\n\nThe highest Ozone occurs in August and July.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair  %>%\n  select(Ozone, Month, Day)%>% \n  slice_min(Ozone, n = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Ozone Month Day\n1     1     5  21\n2     4     5  23\n3     6     5  18\n```\n:::\n:::\n\n\nThe lowest Ozone level occurs in May\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair %>% filter(Ozone > 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Ozone Solar.R Wind Temp Month Day\n1   115     223  5.7   79     5  30\n2   135     269  4.1   84     7   1\n3   108     223  8.0   85     7  25\n4   122     255  4.0   89     8   7\n5   110     207  8.0   90     8   9\n6   168     238  3.4   81     8  25\n7   118     225  2.3   94     8  29\n```\n:::\n:::\n\n\nThere are 7 days with Ozone level higher than 100, 6 out of 7 occurs in July and August with temperature over 80 degrees.\n\nIt looks like time in the year might affect Ozone level. So let's check it out.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nair %>% \n  group_by(Month) %>%\n  summarise(mean_ozone = mean(Ozone),\n            mean_temp = mean(Temp),\n            sd_temp = sd(Temp),\n            median_temp = median(Temp),\n            max_temp = max(Temp),\n            min_temp = min(Temp),\n            count = n()) %>%\n  arrange(desc(mean_temp))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 8\n  Month mean_ozone mean_temp sd_temp median_temp max_temp min_temp count\n  <int>      <dbl>     <dbl>   <dbl>       <dbl>    <int>    <int> <int>\n1     7       59.1      83.9    4.44          84       92       73    26\n2     8       60        83.7    7.05          81       97       72    23\n3     6       29.4      78.2    7.84          77       90       65     9\n4     9       31.4      76.9    8.50          76       93       63    29\n5     5       24.1      66.5    6.63          66       81       57    24\n```\n:::\n:::\n\n\nJuly has the highest mean, median, and standard deviation of temperature, but August is only a little bit behind in mean tempature. August has slightly higher mean Ozone level compared to July. May has the lowest mean Ozone and mean temperature\n\n::: callout-tip\nIn scatterplots, flexibly play with color, dot size, dot shapes to add more information to the plots\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(air, aes(x=Temp, y=Ozone)) + \n  geom_point(aes(col=Month)) + ggtitle(\"Ozone level against temperature\")\n```\n\n::: {.cell-output-display}\n![](example_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(air, aes(x=Solar.R, y=Ozone)) + \n  geom_point(aes(col=Month)) + ggtitle(\"Ozone level against solar radiation\")\n```\n\n::: {.cell-output-display}\n![](example_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(air, aes(x=Wind, y=Ozone)) + \n  geom_point(aes(col=Month))  + ggtitle(\"Ozone level against average wind speed\")\n```\n\n::: {.cell-output-display}\n![](example_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(air, aes(x=Day, y=Ozone)) + \n  geom_point()  + facet_grid(cols = vars(Month))  + ggtitle(\"Ozone level across days\")\n```\n\n::: {.cell-output-display}\n![We plot ozone levels across days separated by months. There is no strong relationship between the ozone levels and the specific days in the month.](example_files/figure-html/fig-ozone-days-1.png){#fig-ozone-days width=672}\n:::\n:::\n\n\n::: callout-note\nWe have used `select`, `slice_max`, `group_by`, `summarize`, `filter`, `arrange` in the `dplyr` package\n:::\n",
    "supporting": [
      "example_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}